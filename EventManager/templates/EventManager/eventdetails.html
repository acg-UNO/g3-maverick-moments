{% extends "EventManager/base.html" %}
{% load static %}

{% block title %} {{ event.title }} {% endblock %}

{% block css %}
<link href="{% static 'css/eventdetails.css' %}" rel="stylesheet">
{% endblock %}


{% block content %}
<div class="acc-left">
<div class="acc-event">
<h1>{{ event.title }}</h1>
<<<<<<< HEAD
<div class="acc-details img">
=======
{% if user.is_authenticated %}
    {% if registered %} 
        <h2>You're registered for this event!</h2>
        <p><a href="{% url 'eventunregister' id=event.id %}">unregister</a></p>
    {% else %}
        <a href="{% url 'eventregister' id=event.id %}"><h2>REGISTER</h2></a>
    {% endif %}
{% else %}
    <p><a href="{% url 'login' %}">Login</a> to register</p>
{% endif %}
{% if user.is_superuser %}
    <a href="{% url 'edit_event' event.id %}" class="edit-event-btn">Edit Event</a>
{% endif %}
{% if user.is_superuser %}
    <h3>Registrations for this Event</h3>
    <ul>
        {% for registration in event.registrations.all %}
            <li>{{ registration.user.username }} - {{ registration.timestamp }}</li>
        {% endfor %}
    </ul>
{% endif %}    
    
<<<<<<< Updated upstream
=======
<<<<<<< HEAD
>>>>>>> cc40eb1afdec427ae70e743b77354de70e12805c
=======
>>>>>>> cc40eb1afdec427ae70e743b77354de70e12805c
>>>>>>> Stashed changes
{% if event.image %}    
    <img src="{{ event.image.url }}" alt="{{ event.name }}" style="max-width: 200px; max-height: 200px;">
{% else %}
    <p><em>No image available for this event.</em></p>
{% endif %}    
    
    <h2>{{ event.start_date }} {% if event.end_date %}- {{ event.end_date }}{% endif %}</h2>
    <h2>At <a href="{% url 'venuedetails' id=event.venue.id %}">{{ event.venue.name }}</a></h2>
    <p>{{ event.description }}</p>

<<<<<<< HEAD
=======
<!-- put comments here or sumn -->
    <h2>Comments</h2>
        <ul>
            {% for comment in comments %}
                <li>
                    <strong>{{ comment.user.username }}</strong> ({{ comment.created_at }}):<br>
                    {{ comment.text }}
                    <!-- shows delete button if user logged in and is the author of the comment -->
                    {% if user == comment.user %}
                        <form method="POST" action="{% url 'delete_comment' comment.id %}">
                            {% csrf_token %}
                            <button type="submit" class="delete-comment-btn">Delete</button>
                        </form>
                    {% endif %}
                </li>
            {% empty %}
                <p>No comments yet.</p>
            {% endfor %}
        </ul>
    
<!-- comment form for registered users only -->
>>>>>>> cc40eb1afdec427ae70e743b77354de70e12805c
    {% if user.is_authenticated %}
        <h3>Add a Comment</h3>
            <form method="POST">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Submit Comment</button>
            </form>
    {% else %}
        <p><a href="{% url 'login' %}">Log in</a> to add a comment.</p>
    {% endif %}
<<<<<<< Updated upstream
=======
<<<<<<< HEAD

</div>
<!-- put comments here or sumn -->

<div class="acc-event-right">
    <h2>Comments</h2>
        <ul>
            {% for comment in comments %}
                <li>
                    <strong>{{ comment.user.username }}</strong> ({{ comment.created_at }}):<br>
                    {{ comment.text }}
                    <!-- shows delete button if user logged in and is the author of the comment -->
                    {% if user == comment.user %}
                        <form method="POST" action="{% url 'delete_comment' comment.id %}">
                            {% csrf_token %}
                            <button type="submit" class="delete-comment-btn">Delete</button>
                        </form>
                    {% endif %}
                </li>
            {% empty %}
                <p>No comments yet.</p>
            {% endfor %}
        </ul>
</div>
    <div class="acc-event-right h3">
{% if user.is_authenticated %}
    {% if registered %}
        <h2>You're registered for this event!</h2>
        <p><a href="{% url 'eventunregister' id=event.id %}">unregister</a></p>
    {% else %}
        <a href="{% url 'eventregister' id=event.id %}"><h2>REGISTER</h2></a>
    {% endif %}
<<<<<<< HEAD
{% else %}
    <p><a href="{% url 'login' %}">Login</a> to register</p>
{% endif %}
</div>
<!-- comment form for registered users only -->

</div>
</div>
=======
=======
>>>>>>> cc40eb1afdec427ae70e743b77354de70e12805c
>>>>>>> Stashed changes
<h1>{{ event.name }}</h1>
<p>{{ event.description }}</p>
<p>Date: {{ event.date }}</p>

{% if user.is_superuser %}
    <a href="{% url 'edit_event' event.id %}" class="btn btn-secondary">Edit Event</a>
    <h2>Registrations</h2>
    <ul>
        {% for registration in registrations %}
            <li>{{ registration.user.username }} - {{ registration.timestamp }}</li>
        {% endfor %}
    </ul>
{% endif %}    
<<<<<<< Updated upstream
    </div>    
=======

<<<<<<< HEAD
>>>>>>> cc40eb1afdec427ae70e743b77354de70e12805c
=======
>>>>>>> cc40eb1afdec427ae70e743b77354de70e12805c
>>>>>>> Stashed changes
{% endblock %}